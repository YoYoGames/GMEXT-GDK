<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Base Module - GMEXT-GDK</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
        <link href="assets/css/gmext_style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Base Module";
        var mkdocs_page_input_path = "base.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/gml.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="." class="icon icon-home"> GMEXT-GDK
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="home.html">GDK Extension</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="building_guide.html">Building Guide (How to build the extension from source)</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="gdk_extension_guides.html">Quick Start Guide (Project setup, sandboxes & configuration files)</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="api.html">GDK Extension API</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Base Module</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#base-functions">Base Functions</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="storage.html">Storage Module</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="xbox_live.html">Xbox Live Module</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="iap.html">In-App Purchases Module</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">GMEXT-GDK</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Base Module</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/YoYoGames/GMEXT-GDK/edit/master/docs/base.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <p><a id="top"></a></p>
<h1 id="base-module"><strong>Base Module</strong></h1>
<p>The Base Module in the GDK Extension provides a set of functions to handle the user/account selection for the player.</p>
<h2 id="base-functions">Base Functions</h2>
<p>The following functions are given for working with user accounts:</p>
<ul>
<li><a href="base.html#xboxone_show_account_picker">xboxone_show_account_picker</a></li>
<li><a href="base.html#xboxone_get_token_and_signature">xboxone_get_token_and_signature</a></li>
<li><a href="base.html#xboxone_get_activating_user">xboxone_get_activating_user</a></li>
<li><a href="base.html#xboxone_get_user_count">xboxone_get_user_count</a></li>
<li><a href="base.html#xboxone_get_user">xboxone_get_user</a></li>
</ul>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="xboxone_get_activating_user">xboxone_get_activating_user</h1>
<p>With this function you can retrieve the user ID pointer for the user that launched the game.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The returned user ID may not always be accurate as the active account can be changed at any time and this value will always return the user account that was active when the game launched.</p>
</div>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">xboxone_get_activating_user()</code></pre>
</blockquote>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Pointer</a></p>
</blockquote>
<p>The user ID pointer</p>
<p><br></p>
<p><strong>Example:</strong></p>
<p><pre class="highlight"><code class="language-gml">global.main_user = xboxone_get_activating_user();</code></pre>
In the code above we get the ID of the user responsible for launching the game and store it inside a global variable (<code>global.main_user</code>).</p>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="xboxone_get_token_and_signature">xboxone_get_token_and_signature</h1>
<p>This function retrieves xtokens and signatures for web requests.</p>
<p>This function returns -1 if it fails and 0 if succeeds to request the token/signature.</p>
<p>This function operates asynchronously, which means that it does not immediately return the requested result. Instead, upon completion of the task, it will trigger the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/System.htm">System Async Event</a>.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">xboxone_get_token_and_signature(user, url, method, json_headers, body, force_refresh)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>user</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Int64</a></td>
<td>The user's unique identifier</td>
</tr>
<tr>
<td>url</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The URL for the web request</td>
</tr>
<tr>
<td>method</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The method type for the web request (HTTP method)</td>
</tr>
<tr>
<td>json_headers</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>Headers for the web request (JSON-formatted string)</td>
</tr>
<tr>
<td>body</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a> or <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Buffers/Buffers.htm">Buffer</a></td>
<td>A buffer that contains the body of the web request (also accepts strings)</td>
</tr>
<tr>
<td>force_refresh</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a></td>
<td>Whether a refresh should be forced or not</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></p>
</blockquote>
<p><br></p>
<p><strong>Triggers:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/System.htm">System Async Event</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>event_type</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The string <code>"tokenandsignature_result"</code></td>
</tr>
<tr>
<td>status</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></td>
<td>Returns <code>-1</code> if request failed, <code>0</code> if succeeded</td>
</tr>
<tr>
<td>token</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The token for the provided user</td>
</tr>
<tr>
<td>signature</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The signature of the HTTP request</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Example:</strong></p>
<p><pre class="highlight"><code class="language-gml">var headers = ds_map_create();
headers[?"this"] = "that";
headers[?"woot"] = "this";

var body = buffer_create(1, buffer_grow, 1);
buffer_write(body, buffer_string, "hello");

var url = "https://profile.xboxlive.com/users/me/profile/settings?settings=GameDisplayName";
var request_method = "GET";

if (xboxone_get_token_and_signature(xboxone_get_activating_user(), url, request_method, json_encode(headers), body, true) &lt; 0) {
    show_message("Token query failed");
}
else {
    show_debug_message("Requested token.");
}

buffer_delete(body);
ds_map_destroy(headers);</code></pre>
In the code above we perform a token request for the activating user with <a href="base.html#xboxone_get_activating_user">xboxone_get_activating_user</a>, this function behaves similarly to to a simple <a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Asynchronous_Functions/HTTP/http_request.htm">http_request</a> in the way you are required to provide a URL, http method (GET, POST, ...), the headers to be used in the request and the body that can be either in buffer or string format. We can catch the function callback inside the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/System.htm">System Async Event</a>, following the code below.</p>
<pre class="highlight"><code class="language-gml">// Early exit if event type doesn't match
if (async_load[?"event_type"] != "tokenandsignature_result") { exit; }

// Validate status
var status = async_load[?"status"];
if (status == 0) {
    // Success
    show_message("Token query succeeded. See output.");
    show_debug_message("The token of the user that opened the app: " + async_load[?"token"]);
    if (ds_map_exists(async_load, "signature")) {
        show_debug_message("The signature of the http request: " + async_load[?"signature"]);
    }
}
else {
    // Failure
    show_message("Token query failed");
}</code></pre>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="xboxone_get_user">xboxone_get_user</h1>
<p>With this function you can retrieve the user ID pointer for the indexed user. If the user does not exist, the function will return the constant <code>pointer_null</code> instead. You can find the number of users currently logged in with the function <a href="base.html#xboxone_get_user_count">xboxone_get_user_count</a>.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">xboxone_get_user(index)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>index</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></td>
<td>The index to get the user ID from</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Pointer</a></p>
</blockquote>
<p>(The user ID pointer)</p>
<p><br></p>
<p><strong>Example:</strong></p>
<p><pre class="highlight"><code class="language-gml">for (var i = 0; i &lt; xboxone_get_user_count(); i++)
{
    user_id[i] = xboxone_get_user(i);
}</code></pre>
In the code above we loop through all the users currently signed in (using the <a href="base.html#xboxone_get_user_count">xboxone_get_user_count</a> function) and store their user IDs into an array (<code>user_id</code>).</p>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="xboxone_get_user_count">xboxone_get_user_count</h1>
<p>With this function you can find the total number of users currently signed in to the system. The returned value will be an integer.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">xboxone_get_user_count()</code></pre>
</blockquote>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></p>
</blockquote>
<p>(The total number of users currently signed in to the system)</p>
<p><br></p>
<p><strong>Example:</strong></p>
<p><pre class="highlight"><code class="language-gml">for (var i = 0; i &lt; xboxone_get_user_count(); i++)
{
    user_id[i] = xboxone_get_user(i);
}</code></pre>
In the code above we loop through all the users currently signed in to the system and store their user IDs into an array (using the <a href="base.html#xboxone_get_user">xboxone_get_user</a> function).</p>
<p><br></p>
<p><br></p>
<hr />
<p align="right"><a href="#top">Back To Top</a></p>

<h1 id="xboxone_show_account_picker">xboxone_show_account_picker</h1>
<p>This function launches the system's account picker for the specified pad ID, where selecting an account will associate it with the specified pad. The <code>guests</code> argument is either <code>true</code> or <code>false</code> – if <code>false</code> is specified no guest accounts can be selected, while <code>true</code> allows guest accounts.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>IMPORTANT The argument <code>pad_id</code> is ignored by the GDK Extension and is only used when the function is called on console.</p>
</div>
<p>This function operates asynchronously, which means that it does not immediately return the requested result. Instead, upon completion of the task, it will trigger the <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/Dialog.htm">Dialog Async Event</a>.</p>
<p><br></p>
<p><strong>Syntax:</strong></p>
<blockquote>
<pre class="highlight"><code class="language-gml">xboxone_show_account_picker(pad_id, guests)</code></pre>
</blockquote>
<table>
<thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>pad_id</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></td>
<td><img alt="⚠️" class="emojione" src="https://cdnjs.cloudflare.com/ajax/libs/emojione/2.2.7/assets/png/26a0.png" title=":warning:" /> UNUSED Pad ID of the user to select the account for</td>
</tr>
<tr>
<td>guests</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a></td>
<td>Whether we should allow guest accounts</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><br></p>
<p><br></p>
<p><strong>Returns:</strong></p>
<blockquote>
<p>N/A</p>
</blockquote>
<p><br></p>
<p><strong>Triggers:</strong></p>
<blockquote>
<p><a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/Dialog.htm">Dialog Async Event</a></p>
</blockquote>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>type</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Reference/Strings/Strings.htm">String</a></td>
<td>The string <code>"xboxone_accountpicker"</code></td>
</tr>
<tr>
<td>succeeded</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a></td>
<td>Returns <code>true</code> if an account was select, <code>false</code> if cancelled</td>
</tr>
<tr>
<td>user</td>
<td><a href="https://manual.gamemaker.io/monthly/en/GameMaker_Language/GML_Overview/Data_Types.htm">Pointer</a></td>
<td>The store ID used when acquiring the license</td>
</tr>
</tbody>
</table>
<p><br></p>
<p><strong>Example:</strong></p>
<p><pre class="highlight"><code class="language-gml">xboxone_show_account_picker(0, false);</code></pre>
In the code above we first request for an account selection dialog that allows no guest accounts. The function callback can be caught inside an <a href="https://manual.gamemaker.io/monthly/en/The_Asset_Editors/Object_Properties/Async_Events/Dialog.htm">Dialog Async Event</a>, following the code below.</p>
<p><pre class="highlight"><code class="language-gml">if (async_load[? "type"] == "xboxone_accountpicker")
{
    if (async_load[? "succeeded"] == false)
    {
        show_debug_message("User cancelled account selection!");
    }
}</code></pre>
The code above matches the response against the correct event <strong>id</strong>, providing a failure message if <code>"succeeded"</code> is <code>false</code>.</p>
<p><br></p>
<p><br></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="api.html" class="btn btn-neutral float-left" title="GDK Extension API"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="storage.html" class="btn btn-neutral float-right" title="Storage Module">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>YoYoGames 2025</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/YoYoGames/GMEXT-GDK" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="api.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="storage.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/gml.min.js"></script>
      <script src="assets/js/gmext_script.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
